# Temperature Monitor

Temperature Monitor — это кроссплатформенная система для сбора, хранения и визуализации данных о температуре. Проект состоит из сервера на C++, который сохраняет данные в базу данных SQLite, и клиентского веб-приложения на Python (Flask), которое отображает данные в виде графиков и таблиц.

---

## Основные функции

1. **Сбор данных**:
   - Программа считывает данные о температуре с порта и сохраняет их в базу данных.
   - Вычисляет средние значения температуры за час и за день.

2. **Сетевой сервер**:
   - Сервер предоставляет данные по HTTP-запросам.
   - Доступные эндпоинты:
     - `/temperatures` — сырые данные о температуре.
     - `/avg_temp_hour` — средние значения за час.
     - `/avg_temp_day` — средние значения за день.

3. **Клиентское веб-приложение**:
   - Отображает данные в виде графиков и таблиц.
   - Графики строятся с помощью `matplotlib`.
   - Таблицы отображают данные в удобном формате.

---

## Установка и запуск

### Требования

- **Сервер (C++)**:
  - Компилятор C++ (например, GCC или MSVC).
  - Boost (Asio, Beast, PropertyTree).
  - SQLite3.

- **Клиент (Python)**:
  - Python 3.8 или выше.
  - Установленные библиотеки:
    ```bash
    pip install flask requests matplotlib
    ```

---

### Установка сервера

1. Клонируйте репозиторий:
   ```bash
   git clone https://github.com/amnyam11/web-temp-tracker.git
   cd web-temp-tracker/server
   ```
2. Убедитесь в правильности указанных переменных среды в CMakeLists.txt, при необходимости укажите пути к нужным папкам (пример представлен в коммите "updated")
3. Соберите server в папку _build с помощью cmake
4. Запустите собранные приложения:
   пример для Windows:
   ```bash
   server.exe
   temperature_monitor.exe COM1
   simulator.exe COM2
   ```
5. Запустите клиент:
   ```bash
   cd ../client
   pip install -r requirements.txt
   python app.py
   ```
   переидите по указанному адресу ```http://127.0.0.1:5000```
## Использование
### Сервер
Сервер предоставляет данные через HTTP-запросы. Доступные эндпоинты:
```bash
GET /temperatures
GET /avg_temp_hour
GET /avg_temp_day
```
### Клиент
Клиентское веб-приложение отображает данные в двух форматах:
На главной странице (/) отображаются графики для сырых данных, средних значений за час и за день.
На отдельных страницах (/temperatures, /avg_temp_hour, /avg_temp_day) отображаются таблицы с данными.

### API
base url:
```bash
http://127.0.0.1:8080
```
**Эндпоинты**:
Описание: Возвращает все записи о температуре из таблиц.

Пример запроса:
```bash
GET /temperatures
GET /avg_temp_hour
GET /avg_temp_day
```
Пример ответа:
```json
{
    "data": [
        {
            "timestamp": "2023-10-01 12:00:00",
            "value": 25.5
        },
        {
            "timestamp": "2023-10-01 12:10:00",
            "value": 26.0
        }
    ]
}
```

###Формат ответа
Все ответы возвращаются в формате JSON. Каждый ответ содержит ключ data, который является массивом объектов. Каждый объект содержит:
  timestamp: Временная метка в формате YYYY-MM-DD HH:MM:SS.
  value: Значение температуры (число с плавающей точкой).
